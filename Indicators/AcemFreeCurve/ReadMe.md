# 曲線入力インジケータ
## 概要
マウスカーソル移動でフリーハンドの曲線を入力可能にする。

## パラメーター
| パラメーター |初期値 |  意味 |
| ---- | ---- | ---- |
|色1|Yellow|入力する線の色1|
|色1キー|Y|色1に変更するキー|
|色2|Red|入力する線の色2|
|色2キー|U|色2に変更するキー|
|色3|Blue|入力する線の色3|
|色3キー|I|色3に変更するキー|
|色変更キー|Q|色を1→2→3→1・・・と順番に変更する|
|線幅|3|入力する線の幅|
|削除モード切り替えキー|E|削除モードと入力モードを切り替えるキー|
|削除モードでライン選択で即削除する|true|削除モードで削除対象のラインを選択しただけで削除を実行する|
|一括削除キー|A|削除モードで入力されているラインをすべて削除するキー|
|分割モード切り替えキー|S|削除モードで入力されているラインをすべて削除するキー|
|表示/非表示切り替えきー|S|入力モードと非表示モードを切り替えるキー|
|自動分割|ture|マウスが一度に指定値以上移動した場合は移動後の地点から新たにラインを開始する|
|自動分割距離|50|自動分割がtrueのときに自動分割を行う距離|
|タッチペンモード|true|タッチペンモードにする|
|入力切り替えキー|W|タッチペンモードで入力/非入力を切り替えるキー|

## 操作方法  
### 曲線を入力する  
通常モードとタッチペンモードで入力方法が異なる。  
* 通常モード  
入力モードでSHIFTキーを押しながらマウスカーソルを移動させる。  
* タッチペンモード  
入力モードでマウスカーソルを移動させる。  

#### 入力オプション操作
* 入力線分の色  
    割り当てた色キーで直接色を指定して変更することができる。  
    色変更キーを押すことで色1→色2→色3→色1…と順次切り替えることができる  
    ※曲線の入力中に色を変更した場合は、新しい曲線の開始となる。  
    アイコンの色は現在選択されている色となる  
* 自動分割  
        マウスの移動距離が指定値以上の場合は、その区間の線分は作成しないで、移動後の位置から新しい曲線を開始する。  

### 曲線を削除する  
削除モードで曲線の要素を選択・確定すると選択した要素が属する曲線が削除される。  

* オプション操作
    * 一括削除  
    削除モード中に一括削除キーを押すことですべての曲線が削除される  
    * 選択即確定  
    削除モードで要素が選択された時点で削除が行われる。  
    * 曲線の分割  
    削除モードで分割モード切り替えキーを押すと分割モードになる  
    分割モードで線分を選択することで選択した線分から別の曲線に分割される。  
    * 曲線を非表示にする  
    表示/非表示切り替えキーを押すことで、すべての曲線を非表示にすることができる。  

### 通常モードとタッチペンモードについて  
* タッチペンモードでは、ドラッグによるスクロールが不可となる。  
* 通常モードとタッチペンモードでは入力操作が異なる（詳細は入力方法を参照）。  

### 通常モードでの状態遷移  
```mermaid
stateDiagram-v2
  State "入力モード" As Input
  State "削除モード" As Delete
  State "非表示モード" As Hide
  State "分割モード" As Split
  Input --> Delete : E
  Input --> Hide : S
  Delete --> Split : S
  Split --> Delete : S
  Hide --> Input : S
  ```

|アイコン|モード|動作|
| :---: | --- | --- |
|![alt text](images/InputModeIcon.png)|入力モード|SHIFTキーを押しながらカーソル移動で入力される|
|![alt text](images/DeleteModeIcon.png)|削除モード|選択したラインが属する曲線を削除する|
|![alt text](images/SplitModeIcon.png)|分割モード|選択したラインで曲線を分割する|
|![alt text](images/HideModeIcon.png)|非表示モード|曲線が非表示にする|
### タッチペンモードでの状態遷移  

```mermaid
stateDiagram-v2
  State "入力モード" As Input
  State "非入力モード" As NoInput
  State "削除モード" As Delete
  State "非表示モード" As Hide
  State "分割モード" As Split
  NoInput --> Input : W
  NoInput --> Delete : E
  NoInput --> Hide : S
  Input --> NoInput : W
  Input --> Delete : E
  Input --> Hide : S
  Delete --> Split : S
  Delete --> NoInput : E
  Split --> Delete : S
  Hide --> NoInput : S
  ```
  |アイコン|モード|動作|
| :---: | --- | --- |
|![alt text](images/NonInputModeIcon.png) |非入力モード|何も行われない|
|![alt text](images/InputModeIcon.png)|入力モード|カーソル移動で入力される|
|![alt text](images/DeleteModeIcon.png)|削除モード|選択したラインが属する曲線を削除する|
|![alt text](images/SplitModeIcon.png)|分割モード|選択したラインで曲線を分割する|
|![alt text](images/HideModeIcon.png)|非表示モード|曲線が非表示にする|
